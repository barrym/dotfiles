desc 'Installs Spec::Rails'
task 'install:rspec' do
  system("ruby script/plugin install http://rspec.rubyforge.org/svn/tags/CURRENT/rspec")
  puts
  puts("rspec plug installed, installing rspec_on_rails")
  puts
  system("ruby script/plugin install http://rspec.rubyforge.org/svn/tags/CURRENT/rspec_on_rails")
  puts
  puts("Running script/generate rspec")
  puts
  system("ruby script/generate rspec")
end

desc 'Install the plugin in vendor/plugins/will_paginate'
task 'will_paginate:install' do
  require("fileutils")
  wp_dir = "vendor/plugins/will_paginate"
  begin
    FileUtils.mkdir(wp_dir)
  rescue Errno::EEXIST
    $stderr.puts("#{wp_dir} already exists: updating ...")
  end
  url = "http://github.com/mislav/will_paginate/tarball/master"
  system("wget -nv #{url} -O- | tar xzv -C #{wp_dir} --strip 1")
end

desc 'Install restful_authentication'
task 'install:restful_authentication' do
  puts("Installing restful authentication")
  system("ruby script/plugin source http://svn.techno-weenie.net/projects/plugins")
  system("ruby script/plugin install restful_authentication")
end
